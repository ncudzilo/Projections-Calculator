<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reneu Projections</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --bg: #080808;
            --glass: rgba(20, 20, 20, 0.5);
            --glass-border: rgba(248, 204, 116, 0.12);
            --brand: #f8cc74;
            --brand-muted: rgba(248, 204, 116, 0.6);
            --text: #e5e5e5;
            --text-dim: rgba(255, 255, 255, 0.4);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* --- 3D EMBOSSED BACKGROUND --- */
        .bg-container {
            position: fixed;
            inset: 0;
            z-index: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
        }
        .embossed-triquetra {
            width: 80vw;
            max-width: 800px;
            filter: drop-shadow(0px 1px 1px rgba(255,255,255,0.05)) drop-shadow(-1px -1px 1px rgba(0,0,0,0.8));
            opacity: 0.15;
        }

        /* --- LOGO ANIMATION --- */
        .header-nav {
            position: fixed;
            top: 0; width: 100%;
            padding: 40px;
            z-index: 100;
            display: flex;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .logo-img {
            height: 72px;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .scrolled.header-nav { padding: 20px; background: rgba(8,8,8,0.8); backdrop-filter: blur(10px); }
        .scrolled .logo-img { height: 40px; }

        .container {
            position: relative;
            z-index: 1;
            max-width: 1200px;
            margin: 0 auto;
            padding: 180px 24px 100px;
        }

        .page-title {
            font-weight: 300;
            font-size: 2.5rem;
            letter-spacing: -0.02em;
            text-align: center;
            margin-bottom: 60px;
            color: #fff;
        }

        /* --- LIQUID GLASS PANELS --- */
        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(25px) saturate(150%);
            -webkit-backdrop-filter: blur(25px) saturate(150%);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3), inset 0 1px 1px rgba(255,255,255,0.05);
            margin-bottom: 24px;
            overflow: hidden;
        }

        .panel-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 40px;
        }

        .input-panel { padding: 40px; }
        .panel-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            color: var(--brand);
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* --- INPUTS & TOGGLES --- */
        .group { margin-bottom: 24px; }
        .label-wrap { display: flex; justify-content: space-between; margin-bottom: 12px; }
        .label-wrap label { font-size: 0.8rem; color: var(--text-dim); display: flex; align-items: center; gap: 6px; }
        
        input[type="number"] {
            width: 100%;
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 12px;
            padding: 14px;
            color: #fff;
            font-family: inherit;
            outline: none;
            transition: border 0.3s;
        }
        input[type="number"]:focus { border-color: var(--brand-muted); }

        .unit-toggle {
            display: flex;
            background: rgba(0,0,0,0.3);
            border-radius: 6px;
            padding: 2px;
        }
        .unit-btn {
            font-size: 0.6rem;
            padding: 4px 8px;
            border-radius: 4px;
            background: none; border: none;
            color: var(--text-dim);
            cursor: pointer;
            font-weight: 600;
        }
        .unit-btn.active { background: var(--brand); color: #000; }

        /* --- ACCORDIONS --- */
        .tier-accordion {
            border-top: 1px solid rgba(255,255,255,0.05);
            margin-top: 16px;
        }
        .tier-trigger {
            width: 100%; padding: 16px 0;
            background: none; border: none;
            display: flex; justify-content: space-between;
            color: var(--text); font-size: 0.8rem; cursor: pointer;
        }
        .tier-content {
            max-height: 0; overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .tier-content.open { max-height: 200px; padding-bottom: 20px; }

        /* --- METRICS --- */
        .metrics-row {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }
        .metric-mini {
            padding: 20px 10px;
            text-align: center;
        }
        .m-label { font-size: 0.55rem; text-transform: uppercase; color: var(--text-dim); margin-bottom: 8px; letter-spacing: 0.1em; }
        .m-value { font-size: 1.1rem; font-weight: 400; color: var(--brand); }

        /* --- HELP TOOLTIPS --- */
        .help-icon {
            width: 14px; height: 14px;
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 50%;
            display: inline-flex; align-items: center; justify-content: center;
            font-size: 8px; color: var(--text-dim); cursor: help;
        }
        .help-icon:hover { border-color: var(--brand); color: var(--brand); }

        /* --- CHART STYLING --- */
        .chart-grid { display: grid; grid-template-columns: 1.5fr 1fr; gap: 24px; }
        .chart-wrap { padding: 30px; }

        /* --- ORB --- */
        #orbCanvas { position: fixed; bottom: 30px; right: 30px; z-index: 1000; cursor: pointer; filter: drop-shadow(0 0 20px rgba(248,204,116,0.3)); }

        @media (max-width: 900px) {
            .panel-grid, .metrics-row, .chart-grid { grid-template-columns: 1fr; }
            .metrics-row { grid-template-columns: 1fr 1fr; }
        }
    </style>
</head>
<body>

    <div class="bg-container">
        <svg class="embossed-triquetra" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <filter id="liquid-emboss">
                    <feGaussianBlur in="SourceAlpha" stdDeviation="2" result="blur"/>
                    <feSpecularLighting in="blur" surfaceScale="4" specularConstant="0.8" specularExponent="25" lighting-color="#f8cc74" result="spec">
                        <fePointLight x="-50" y="-100" z="200"/>
                    </feSpecularLighting>
                    <feComposite in="spec" in2="SourceAlpha" operator="in" result="spec"/>
                    <feComposite in="SourceGraphic" in2="spec" operator="arithmetic" k1="0" k2="1" k3="1" k4="0"/>
                </filter>
            </defs>
            <path d="M100 20 C 130 20, 160 60, 160 90 C 160 130, 130 170, 100 170 C 70 170, 40 130, 40 90 C 40 60, 70 20, 100 20 Z M100 170 C 130 170, 170 140, 170 100 C 170 60, 130 30, 100 30 C 70 30, 30 60, 30 100 C 30 140, 70 170, 100 170 Z M100 30 C 140 30, 170 70, 170 110 C 170 140, 140 180, 100 180 C 60 180, 30 140, 30 110 C 30 70, 60 30, 100 30 Z" 
            fill="#0a0a0a" filter="url(#liquid-emboss)" transform="rotate(180 100 100)"/>
        </svg>
    </div>

    <div class="header-nav" id="nav">
        <img src="https://images.squarespace-cdn.com/content/67b235ef2dea730361197833/c8e81194-4662-4ff0-806d-e8ba9e2be295/Gold+Logo+2.png" class="logo-img">
    </div>

    <canvas id="orbCanvas" width="160" height="160"></canvas>

    <div class="container">
        <h1 class="page-title">Projections Analysis</h1>

        <div class="metrics-row">
            <div class="glass-card metric-mini">
                <div class="m-label">Break-Even <span class="help-icon" title="When subscription revenue exceeds up-front revenue per period.">?</span></div>
                <div class="m-value" id="m-be">-</div>
            </div>
            <div class="glass-card metric-mini">
                <div class="m-label">Final MRR <span class="help-icon" title="Monthly Recurring Revenue at end of year.">?</span></div>
                <div class="m-value" id="m-mrr">$0</div>
            </div>
            <div class="glass-card metric-mini">
                <div class="m-label">Patient LTV <span class="help-icon" title="Average revenue expected from one patient over their lifetime.">?</span></div>
                <div class="m-value" id="m-ltv">$0</div>
            </div>
            <div class="glass-card metric-mini">
                <div class="m-label">Up-front Util.</div>
                <div class="m-value" id="m-u-util">0%</div>
            </div>
            <div class="glass-card metric-mini">
                <div class="m-label">Sub. Util.</div>
                <div class="m-value" id="m-s-util">0%</div>
            </div>
            <div class="glass-card metric-mini">
                <div class="m-label">Total Util.</div>
                <div class="m-value" id="m-total">0%</div>
            </div>
        </div>

        <div class="panel-grid">
            <div class="glass-card input-panel">
                <div class="panel-label">Up-front Program</div>
                <div class="group">
                    <div class="label-wrap"><label>Program Price ($)</label></div>
                    <input type="number" id="u-price" value="750">
                </div>
                <div class="group">
                    <div class="label-wrap"><label>Patients per Mo</label><span class="val-display" id="u-vol-v">2</span></div>
                    <input type="range" id="u-vol" min="0" max="20" value="2">
                </div>
                <div class="section-separator" style="margin: 30px 0 20px; border-top: 1px solid rgba(255,255,255,0.05);"></div>
                <div class="group">
                    <div class="label-wrap">
                        <label>Weekly Availability</label>
                        <div class="unit-toggle"><button class="unit-btn active" onclick="uT(this,'u-cap','hr')">Hr</button><button class="unit-btn" onclick="uT(this,'u-cap','min')">Min</button></div>
                    </div>
                    <input type="number" id="u-cap" value="20">
                </div>
                <div class="group">
                    <div class="label-wrap">
                        <label>Time per Patient</label>
                        <div class="unit-toggle"><button class="unit-btn" onclick="uT(this,'u-dur','hr')">Hr</button><button class="unit-btn active" onclick="uT(this,'u-dur','min')">Min</button></div>
                    </div>
                    <input type="number" id="u-dur" value="30">
                </div>
            </div>

            <div class="glass-card input-panel">
                <div class="panel-label">Subscription Model</div>
                <div class="group">
                    <div class="label-wrap"><label>Tier 1 Price ($)</label></div>
                    <input type="number" id="s-price" value="90">
                </div>
                <div class="group">
                    <div class="label-wrap"><label>Retention <span class="help-icon" title="% of patients staying month over month.">?</span></label><span class="val-display" id="s-ret-v">85%</span></div>
                    <input type="range" id="s-ret" min="50" max="100" value="85">
                </div>
                <div class="group">
                    <div class="label-wrap"><label>New Patients / Mo</label><span class="val-display" id="s-vol-v">8</span></div>
                    <input type="range" id="s-vol" min="0" max="40" value="8">
                </div>

                <div class="tier-accordion">
                    <button class="tier-trigger" onclick="toggleT(this)"><span>Tier 2 Membership</span><span>+</span></button>
                    <div class="tier-content">
                        <div class="group"><label style="font-size:0.7rem; color:var(--text-dim)">Price</label><input type="number" id="t2-p" value="150"></div>
                        <div class="group"><label style="font-size:0.7rem; color:var(--text-dim)">Monthly Vol</label><input type="number" id="t2-v" value="0"></div>
                    </div>
                </div>
                <div class="tier-accordion">
                    <button class="tier-trigger" onclick="toggleT(this)"><span>Tier 3 Membership</span><span>+</span></button>
                    <div class="tier-content">
                        <div class="group"><label style="font-size:0.7rem; color:var(--text-dim)">Price</label><input type="number" id="t3-p" value="250"></div>
                        <div class="group"><label style="font-size:0.7rem; color:var(--text-dim)">Monthly Vol</label><input type="number" id="t3-v" value="0"></div>
                    </div>
                </div>

                <div class="section-separator" style="margin: 30px 0 20px; border-top: 1px solid rgba(255,255,255,0.05);"></div>
                <div class="group">
                    <div class="label-wrap">
                        <label>Weekly Availability</label>
                        <div class="unit-toggle"><button class="unit-btn active" onclick="uT(this,'s-cap','hr')">Hr</button><button class="unit-btn" onclick="uT(this,'s-cap','min')">Min</button></div>
                    </div>
                    <input type="number" id="s-cap" value="20">
                </div>
                <div class="group">
                    <div class="label-wrap">
                        <label>Time per Patient</label>
                        <div class="unit-toggle"><button class="unit-btn" onclick="uT(this,'s-dur','hr')">Hr</button><button class="unit-btn active" onclick="uT(this,'s-dur','min')">Min</button></div>
                    </div>
                    <input type="number" id="s-dur" value="30">
                </div>
            </div>
        </div>

        <div class="chart-grid">
            <div class="glass-card chart-wrap">
                <canvas id="revChart"></canvas>
            </div>
            <div class="glass-card chart-wrap" style="display: flex; flex-direction: column; justify-content: center; text-align: center;">
                <div class="m-label">Year 1 Net Income</div>
                <div style="font-size: 3rem; font-weight: 300; margin: 20px 0; color:#fff;" id="total-net">$0</div>
                <div class="m-label" style="color:var(--brand-muted)" id="net-diff">+0% vs Up-front only</div>
            </div>
        </div>

        <div class="glass-card" style="padding: 40px; margin-top: 40px; font-size: 0.7rem; color: var(--text-dim); line-height: 1.8;">
            <strong>Projections Disclaimer:</strong> These figures are generated for illustrative purposes only. Actual results will vary based on clinical performance, market demand, and patient retention. Reneu Wellness Club LLC provides administrative support; all clinical outcomes remain the responsibility of the provider.
        </div>
    </div>

    <script>
        /* --- GOLD DUST ORB --- */
        const canvas = document.getElementById('orbCanvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        const num = 1800;
        
        for(let i=0; i<num; i++){
            const t = Math.random()*Math.PI*2, p = Math.acos(Math.random()*2-1);
            particles.push({
                x: 60*Math.sin(p)*Math.cos(t), y: 60*Math.sin(p)*Math.sin(t), z: 60*Math.cos(p),
                s: Math.random()*1.2, a: Math.random()
            });
        }

        let rx=0, ry=0;
        function drawOrb(){
            ctx.clearRect(0,0,160,160);
            rx+=0.005; ry+=0.003;
            const sx=Math.sin(rx), cx=Math.cos(rx), sy=Math.sin(ry), cy=Math.cos(ry);
            particles.forEach(pt => {
                let x = pt.x*cy - pt.z*sy, z = pt.z*cy + pt.x*sy;
                let y = pt.y*cx - z*sx; z = z*cx + pt.y*sx;
                const sc = 200/(200-z);
                ctx.beginPath();
                ctx.arc(80+x*sc, 80+y*sc, pt.s*sc, 0, Math.PI*2);
                ctx.fillStyle = `rgba(248,204,116,${pt.a * sc * 0.4})`;
                ctx.fill();
            });
            requestAnimationFrame(drawOrb);
        }
        drawOrb();

        /* --- UI HELPERS --- */
        window.onscroll = () => document.getElementById('nav').classList.toggle('scrolled', window.scrollY > 50);

        function toggleT(btn){
            const content = btn.nextElementSibling;
            content.classList.toggle('open');
            btn.querySelector('span:last-child').innerText = content.classList.contains('open') ? 'âˆ’' : '+';
        }

        const unitStore = { 'u-cap':'hr', 'u-dur':'min', 's-cap':'hr', 's-dur':'min' };
        function uT(btn, id, unit){
            unitStore[id] = unit;
            btn.parentElement.querySelectorAll('button').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            calculate();
        }

        /* --- LOGIC --- */
        let chart = null;
        function calculate(){
            const uP = parseFloat(document.getElementById('u-price').value)||0;
            const uV = parseFloat(document.getElementById('u-vol').value)||0;
            document.getElementById('u-vol-v').innerText = uV;

            const sP = parseFloat(document.getElementById('s-price').value)||0;
            const sV = parseFloat(document.getElementById('s-vol').value)||0;
            document.getElementById('s-vol-v').innerText = sV;
            const ret = parseFloat(document.getElementById('s-ret').value)/100;
            document.getElementById('s-ret-v').innerText = Math.round(ret*100)+'%';

            // Additional Tiers
            const t2P = parseFloat(document.getElementById('t2-p').value)||0;
            const t2V = parseFloat(document.getElementById('t2-v').value)||0;
            const t3P = parseFloat(document.getElementById('t3-p').value)||0;
            const t3V = parseFloat(document.getElementById('t3-v').value)||0;

            const totalNewVol = sV + t2V + t3V;
            const avgSubPrice = totalNewVol > 0 ? (sP*sV + t2P*t2V + t3P*t3V)/totalNewVol : 0;

            let currentActive = 0, upData = [], subData = [], be = null;
            let totalHrsU = 0, totalHrsS = 0;

            for(let i=1; i<=12; i++){
                const uRev = uP * uV;
                upData.push(uRev);

                currentActive = (currentActive * ret) + totalNewVol;
                const sRev = currentActive * avgSubPrice;
                subData.push(sRev);

                if(!be && sRev > uRev) be = i;
            }

            // Metrics
            document.getElementById('m-be').innerText = be ? `Month ${be}` : '-';
            document.getElementById('m-mrr').innerText = '$' + Math.round(subData[11]).toLocaleString();
            document.getElementById('m-ltv').innerText = '$' + Math.round(avgSubPrice / (1-ret || 1)).toLocaleString();

            const netSub = subData.reduce((a,b)=>a+b, 0);
            const netUp = upData.reduce((a,b)=>a+b, 0);
            document.getElementById('total-net').innerText = '$' + Math.round(netSub + netUp).toLocaleString();
            const diff = netUp > 0 ? Math.round(((netSub)/netUp)*100) : 0;
            document.getElementById('net-diff').innerText = `+${diff}% vs Up-front only`;

            // Util
            const uCap = (parseFloat(document.getElementById('u-cap').value)||0) * (unitStore['u-cap'] === 'min' ? 1/60 : 1) * 4.33;
            const uDur = (parseFloat(document.getElementById('u-dur').value)||0) * (unitStore['u-dur'] === 'min' ? 1/60 : 1);
            const sCap = (parseFloat(document.getElementById('s-cap').value)||0) * (unitStore['s-cap'] === 'min' ? 1/60 : 1) * 4.33;
            const sDur = (parseFloat(document.getElementById('s-dur').value)||0) * (unitStore['s-dur'] === 'min' ? 1/60 : 1);

            const uUtil = Math.round(((uV * uDur) / uCap)*100)||0;
            const sUtil = Math.round(((currentActive * sDur) / sCap)*100)||0;
            document.getElementById('m-u-util').innerText = uUtil+'%';
            document.getElementById('m-s-util').innerText = sUtil+'%';
            document.getElementById('m-total').innerText = Math.round((uUtil + sUtil)/2)+'%';

            updateChart(upData, subData);
        }

        function updateChart(up, sub){
            const ctx = document.getElementById('revChart').getContext('2d');
            if(chart) chart.destroy();
            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],
                    datasets: [
                        { label: 'Subscription', data: sub, borderColor: '#f8cc74', backgroundColor: 'rgba(248,204,116,0.05)', fill: true, tension: 0.4 },
                        { label: 'Up-front', data: up, borderColor: 'rgba(255,255,255,0.2)', borderDash: [5,5], tension: 0 }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#666' } },
                        x: { grid: { display: false }, ticks: { color: '#666' } }
                    }
                }
            });
        }

        document.querySelectorAll('input').forEach(i => i.oninput = calculate);
        calculate();
    </script>
</body>
</html>
